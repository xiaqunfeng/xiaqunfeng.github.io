<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="å¤å¤©çš„é£" />



<meta name="description" content="ä»PGçš„å‘½åå¼€å§‹ä»‹ç»ï¼Œåˆ©ç”¨ä¸€ä¸ªå¯¹è±¡è¯¦ç»†æ¼”ç»ƒPGå„ä¸ªçŠ¶æ€çš„å˜åŒ–ï¼Œå¹¶ä»‹ç»PGçŠ¶æ€åˆ—è¡¨åŠæ„ä¹‰ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="ceph placement group">
<meta property="og:url" content="http://xiaqunfeng.cc/2017/07/28/ceph-placement-group/index.html">
<meta property="og:site_name" content="å¤å¤©çš„é£çš„åšå®¢">
<meta property="og:description" content="ä»PGçš„å‘½åå¼€å§‹ä»‹ç»ï¼Œåˆ©ç”¨ä¸€ä¸ªå¯¹è±¡è¯¦ç»†æ¼”ç»ƒPGå„ä¸ªçŠ¶æ€çš„å˜åŒ–ï¼Œå¹¶ä»‹ç»PGçŠ¶æ€åˆ—è¡¨åŠæ„ä¹‰ã€‚">
<meta property="og:updated_time" content="2017-07-28T07:47:52.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ceph placement group">
<meta name="twitter:description" content="ä»PGçš„å‘½åå¼€å§‹ä»‹ç»ï¼Œåˆ©ç”¨ä¸€ä¸ªå¯¹è±¡è¯¦ç»†æ¼”ç»ƒPGå„ä¸ªçŠ¶æ€çš„å˜åŒ–ï¼Œå¹¶ä»‹ç»PGçŠ¶æ€åˆ—è¡¨åŠæ„ä¹‰ã€‚">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="å¤å¤©çš„é£çš„åšå®¢" type="application/atom+xml">



    <link rel="shortcut icon" href="/red_apple.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>ceph placement group | å¤å¤©çš„é£çš„åšå®¢</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>





    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?2eeeeb98562c97f7d79f13899ec599cd";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/stark.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">å¤å¤©çš„é£</a></h1>
        </hgroup>

        
        <p class="header-subtitle">å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ğŸ˜</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="true" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>èœå•</li>
                        <li>æ ‡ç­¾</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">ä¸»é¡µ</a></li>
                        
                            <li><a href="/archives/">æ‰€æœ‰æ–‡ç« </a></li>
                        
                            <li><a href="/tags/">æ ‡ç­¾äº‘</a></li>
                        
                            <li><a href="/about/">å…³äºæˆ‘</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa GitHub" href="https://github.com/xiaqunfeng" title="GitHub"></a>
                            
                                <a class="fa CSDN" href="http://blog.csdn.net/xiaqunfeng123" title="CSDN"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/caffe/">caffe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ceph/">ceph</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloud/">cloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/code/">code</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deeplearning/">deeplearning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ganesha/">ganesha</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/machine-learning/">machine learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/network/">network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/paper/">paper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rocksdb/">rocksdb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/storage/">storage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>
                    </div>
                </section>
                
                
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="å›åˆ°ä¸»é¡µ">å¤å¤©çš„é£</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/stark.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="å›åˆ°ä¸»é¡µ">å¤å¤©çš„é£</a></h1>
            </hgroup>
            
            <p class="header-subtitle">å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ğŸ˜</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">ä¸»é¡µ</a></li>
                
                    <li><a href="/archives/">æ‰€æœ‰æ–‡ç« </a></li>
                
                    <li><a href="/tags/">æ ‡ç­¾äº‘</a></li>
                
                    <li><a href="/about/">å…³äºæˆ‘</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/xiaqunfeng" title="GitHub"></a>
                            
                                <a class="fa CSDN" target="_blank" href="http://blog.csdn.net/xiaqunfeng123" title="CSDN"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="æ ‡ç­¾" friends="å‹æƒ…é“¾æ¥" about="å…³äºæˆ‘"/>
</nav>
      <div class="body-wrap"><article id="post-ceph-placement-group" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/07/28/ceph-placement-group/" class="article-date">
      <time datetime="2017-07-28T07:20:25.000Z" itemprop="datePublished">2017-07-28</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      ceph placement group
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ceph/">ceph</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>ä»PGçš„å‘½åå¼€å§‹ä»‹ç»ï¼Œåˆ©ç”¨ä¸€ä¸ªå¯¹è±¡è¯¦ç»†æ¼”ç»ƒPGå„ä¸ªçŠ¶æ€çš„å˜åŒ–ï¼Œå¹¶ä»‹ç»PGçŠ¶æ€åˆ—è¡¨åŠæ„ä¹‰ã€‚<br><a id="more"></a></p>
<h2 id="PGå‘½å"><a href="#PGå‘½å" class="headerlink" title="PGå‘½å"></a>PGå‘½å</h2><h3 id="PGå”¯ä¸€æ ‡è¯†ç¬¦"><a href="#PGå”¯ä¸€æ ‡è¯†ç¬¦" class="headerlink" title="PGå”¯ä¸€æ ‡è¯†ç¬¦"></a>PGå”¯ä¸€æ ‡è¯†ç¬¦</h3><p>å½’ç½®ç»„ ID åŒ…å«å­˜å‚¨æ± å·ï¼ˆä¸æ˜¯å­˜å‚¨æ± åå­—ï¼‰ï¼Œåé¢è·Ÿä¸€ä¸ªç‚¹ï¼ˆ . ï¼‰ï¼Œç„¶åæ˜¯å½’ç½®ç»„ IDï¼Œä¸€ä¸ªåå…­è¿›åˆ¶æ•°å­—ã€‚ç”¨ <code>ceph osd lspools</code> å¯æŸ¥çœ‹å­˜å‚¨æ± å·åŠå…¶åå­—ï¼Œé»˜è®¤å­˜å‚¨æ± rbd å¯¹åº”çš„å­˜å‚¨æ± å·æ˜¯ 0  ã€‚å®Œæ•´çš„å½’ç½®ç»„ ID æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;pool-num&#125;.&#123;pg-id&#125;</div></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">0.1f</div></pre></td></tr></table></figure>
<p>ç³»ç»Ÿé»˜è®¤ç”Ÿæˆçš„<code>rbd</code>æ± çš„idå·ä¸º<code>0</code>ï¼Œæ‰€ä»¥ rbd æ± å†…çš„æ‰€æœ‰PGéƒ½ä¼šä»¥<code>0.</code>å¼€å¤´ã€‚</p>
<h3 id="æŸ¥çœ‹osdç›®å½•é‡Œpg"><a href="#æŸ¥çœ‹osdç›®å½•é‡Œpg" class="headerlink" title="æŸ¥çœ‹osdç›®å½•é‡Œpg"></a>æŸ¥çœ‹osdç›®å½•é‡Œpg</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># ls /var/lib/ceph/osd/ceph-0/</div><div class="line">activate.monmap  ceph_fsid        fsid             journal_uuid     magic            store_version    systemd          whoami</div><div class="line">active           current/         journal          keyring          ready            superblock       type</div></pre></td></tr></table></figure>
<p><code>osd.0</code>ä¸‹<code>current</code>ç›®å½•çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ls /var/lib/ceph/osd/ceph-0/current/</div><div class="line">0.0_head   0.1d_head  0.34_head  0.45_head  0.4e_head</div></pre></td></tr></table></figure>
<p>æ¯ä¸ªOSDçš„<code>current</code>ç›®å½•ä¸‹éƒ½ä¿å­˜äº†éƒ¨åˆ†çš„PGï¼Œè€Œrbdæ± çš„PGä»¥<code>0.xxx_head</code>çš„ç›®å½•å½¢å¼å­˜åœ¨ï¼</p>
<h2 id="PGçŠ¶æ€"><a href="#PGçŠ¶æ€" class="headerlink" title="PGçŠ¶æ€"></a>PGçŠ¶æ€</h2><p>æŸ¥çœ‹æ‰€æœ‰å½’ç½®ç»„çŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph pg stat</div><div class="line">v614916: 128 pgs: 128 active+clean; 27194 kB data, 185 MB used, 15141 MB / 15326 MB avail; 56023 B/s rd, 0 B/s wr, 89 op/s</div></pre></td></tr></table></figure>
<p>æœ‰ä¸€äº›é—®é¢˜çš„çŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph pg stat</div><div class="line">v2167: 120 pgs: 120 active+undersized+degraded; 1799 bytes data, 86476 kB used, 10133 MB / 10217 MB avail; 173/519 objects degraded (33.333%)</div></pre></td></tr></table></figure>
<p>æˆ–è€…è¿™æ ·çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph pg stat</div><div class="line">v1468117: 5440 pgs: 4 active+clean+scrubbing+deep, 77 active+remapped+backfilling, 5359 active+clean; 33452 GB data, 68799 GB used, 43742 GB / 109 TB avail; 134 kB/s rd, 154 op/s; 6668502/138960328 objects misplaced (4.799%); 40810 kB/s, 81 objects/s recovering</div></pre></td></tr></table></figure>
<h2 id="è·å–PGåˆ—è¡¨"><a href="#è·å–PGåˆ—è¡¨" class="headerlink" title="è·å–PGåˆ—è¡¨"></a>è·å–PGåˆ—è¡¨</h2><p>ç”¨ä¸‹åˆ—å‘½ä»¤è·å–å½’ç½®ç»„åˆ—è¡¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ceph pg dump</div></pre></td></tr></table></figure>
<p>ä½ ä¹Ÿå¯ä»¥è®©å®ƒè¾“å‡ºåˆ° JSON æ ¼å¼ï¼Œå¹¶ä¿å­˜åˆ°æ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ceph pg dump -o &#123;filename&#125; --format=json</div></pre></td></tr></table></figure>
<p>è¦æŸ¥è¯¢æŸä¸ªå½’ç½®ç»„ï¼Œç”¨ä¸‹åˆ—å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ceph pg &#123;poolnum&#125;.&#123;pg-id&#125; query</div></pre></td></tr></table></figure>
<p>Ceph ä¼šè¾“å‡ºæˆ JSON æ ¼å¼</p>
<h2 id="å†™ä¸€ä¸ªobject"><a href="#å†™ä¸€ä¸ªobject" class="headerlink" title="å†™ä¸€ä¸ªobject"></a>å†™ä¸€ä¸ªobject</h2><p>1ã€æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># cat xinfanyang.txt</div><div class="line">xin fan yang have delicious food</div></pre></td></tr></table></figure>
<p>2ã€æŸ¥çœ‹æ•°æ®åœ¨poolä¸­é»˜è®¤ä¿å­˜çš„ä»½æ•°ã€æœ€å°ä¿å­˜ä»½æ•°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># ceph osd pool get rbd size</div><div class="line">size: 3</div><div class="line"># ceph osd pool get rbd min_size</div><div class="line">min_size: 2</div></pre></td></tr></table></figure>
<p>3ã€å†™ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨é›†ç¾¤ä¸­ä¿å­˜å¯¹è±¡åä¸º <code>xfy</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># rados -p rbd put xfy xinfanyang.txt</div></pre></td></tr></table></figure>
<p>4ã€æŸ¥çœ‹æ–‡ä»¶ä¿å­˜çš„ä½ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph osd map rbd xfy</div><div class="line">osdmap e47 pool &apos;rbd&apos; (0) object &apos;xfy&apos; -&gt; pg 0.c76c82f (0.2f) -&gt; up ([1,2,0], p1) acting ([1,2,0], p1)</div></pre></td></tr></table></figure>
<p>æ–‡ä»¶ä¿å­˜åœ¨pgï¼ˆ0.2fï¼‰ä¸­ï¼Œpgä½äºOSDçš„[1ï¼Œ2ï¼Œ0]ä¸­ï¼Œå…¶ä¸­OSD1æ˜¯ä¸»ï¼Œå…¶ä»–æ˜¯ä»ã€‚</p>
<p>5ã€æŸ¥çœ‹å†…å®¹</p>
<p>åœ¨ä¸‰å°æœºå™¨çš„ä¸‰ä¸ªOSDä¸Šï¼Œè¾“å‡ºå†…å®¹ä¸€è‡´ã€‚ä¸¾ä¾‹ osd.2ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># ll /var/lib/ceph/osd/ceph-2/current/0.2f*</div><div class="line">/var/lib/ceph/osd/ceph-2/current/0.2f_head:</div><div class="line">æ€»ç”¨é‡ 4</div><div class="line">-rw-r--r--. 1 ceph ceph  0 6æœˆ  21 15:45 __head_0000002F__0</div><div class="line">-rw-r--r--. 1 ceph ceph 33 7æœˆ  27 19:35 xfy__head_0C76C82F__0</div><div class="line"></div><div class="line">/var/lib/ceph/osd/ceph-2/current/0.2f_TEMP:</div><div class="line">æ€»ç”¨é‡ 0</div></pre></td></tr></table></figure>
<p>å®é™…å¯¹è±¡å†…å®¹å­˜åœ¨ <code>xfy__head_0C76C82F__0</code> ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># cat /var/lib/ceph/osd/ceph-2/current/0.2f_head/xfy__head_0C76C82F__0</div><div class="line">xin fan yang have delicious food</div></pre></td></tr></table></figure>
<p>osdåˆ†å¸ƒ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"># ceph osd tree</div><div class="line">ID WEIGHT  TYPE NAME       UP/DOWN REWEIGHT PRIMARY-AFFINITY</div><div class="line">-1 0.05457 root default</div><div class="line">-2 0.01819     host ceph-1</div><div class="line"> 0 0.00909         osd.0        up  1.00000          1.00000</div><div class="line"> 3 0.00909         osd.3        up  1.00000          1.00000</div><div class="line">-3 0.01819     host ceph-0</div><div class="line"> 2 0.00909         osd.2        up  1.00000          1.00000</div><div class="line"> 4 0.00909         osd.4        up  1.00000          1.00000</div><div class="line">-4 0.01819     host ceph-2</div><div class="line"> 1 0.00909         osd.1        up  1.00000          1.00000</div><div class="line"> 5 0.00909         osd.5        up  1.00000          1.00000</div></pre></td></tr></table></figure>
<h2 id="PGçŠ¶æ€å˜åŒ–"><a href="#PGçŠ¶æ€å˜åŒ–" class="headerlink" title="PGçŠ¶æ€å˜åŒ–"></a>PGçŠ¶æ€å˜åŒ–</h2><p><strong>1ã€æŸ¥çœ‹ pg[0.2f] çš„çŠ¶æ€</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph pg dump_stuck |egrep ^0.2f</div><div class="line">ok</div></pre></td></tr></table></figure>
<p><strong>2ã€æŒ‚æ‰ä¸€å°æœºå™¨æŒ‚</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># systemctl stop ceph-osd@2</div></pre></td></tr></table></figure>
<p>è¿™æ—¶é™ä¸ºä¸¤å‰¯æœ¬äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph osd map rbd xfy</div><div class="line">osdmap e54 pool &apos;rbd&apos; (0) object &apos;xfy&apos; -&gt; pg 0.c76c82f (0.2f) -&gt; up ([1,0], p1) acting ([1,0], p1)</div></pre></td></tr></table></figure>
<p>æŸ¥çœ‹pgçŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># ceph pg dump_stuck |egrep ^0.2f</div><div class="line">ok</div><div class="line">0.0	active+undersized+degraded	[1,0]	1	[1,0]	1</div></pre></td></tr></table></figure>
<p>å› ä¸ºä¹‹å‰è®¾ç½®çš„æœ€å°å‰¯æœ¬æ•°æ˜¯2ï¼Œæ‰€ä»¥æ²¡å½±å“ï¼Œå¯ä»¥æ­£å¸¸è¯»å–</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># rados -p rbd get xfy 111</div><div class="line"># cat 111</div><div class="line">xin fan yang have delicious food</div></pre></td></tr></table></figure>
<p><strong>3ã€osd out</strong></p>
<p>å°† osd.2 out</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph osd out 2</div><div class="line">marked out osd.2.</div></pre></td></tr></table></figure>
<p>å¦‚æœosd outå‡ºé›†ç¾¤äº†ï¼Œé‚£ä¹ˆ crush ç®—æ³•å°±ä¼šé‡æ–°åˆ†é…ä¸€ä¸ªosdè¿›æ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph osd map rbd xfy</div><div class="line">osdmap e103 pool &apos;rbd&apos; (0) object &apos;xfy&apos; -&gt; pg 0.c76c82f (0.2f) -&gt; up ([1,0,4], p1) acting ([1,0,4], p1)</div></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä¸outï¼Œé»˜è®¤ 600s åè‡ªåŠ¨outï¼Œå…·ä½“æ—¶é—´å¯è°ƒï¼Œé»˜è®¤é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph daemon osd.1 config show | grep mon_osd_down_out_interval</div><div class="line">    &quot;mon_osd_down_out_interval&quot;: &quot;600&quot;,</div></pre></td></tr></table></figure>
<p>é‡æ–°å°† osd.2 åŠ å…¥é›†ç¾¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph osd in 2</div><div class="line">marked in osd.2.</div></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™è¯¥å¯¹è±¡çš„åˆ†å¸ƒ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph osd map rbd xfy</div><div class="line">osdmap e117 pool &apos;rbd&apos; (0) object &apos;xfy&apos; -&gt; pg 0.c76c82f (0.2f) -&gt; up ([1,0], p1) acting ([1,0,4], p1)</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œpgæœ€ç»ˆçš„åˆ†å¸ƒæ˜¯ [1,0]ï¼Œå½“å‰çš„actingåˆ†å¸ƒæ˜¯ [1,0,4]</p>
<p><strong>4ã€æŒ‚æ‰ä¸¤å°æœºå™¨</strong></p>
<p>downæ‰ä¸»å‰¯æœ¬æ‰€åœ¨çš„ osd.1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># systemctl stop ceph-osd@1</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶åªæœ‰ä¸€ä¸ªå‰¯æœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph osd map rbd xfy</div><div class="line">osdmap e56 pool &apos;rbd&apos; (0) object &apos;xfy&apos; -&gt; pg 0.c76c82f (0.2f) -&gt; up ([0], p0) acting ([0], p0)</div></pre></td></tr></table></figure>
<p>æŸ¥çœ‹pgçŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># ceph pg dump_stuck |egrep ^0.2f</div><div class="line">ok</div><div class="line">0.2f    undersized+degraded+peered   [0]          0    [0]              0</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶å†å»getè¿™ä¸ªå¯¹è±¡çš„è¯ï¼Œä¼šä¸€ç›´å¾—ä¸åˆ°è¿”å›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># rados -p rbd get xfy 222</div><div class="line">...							// ä¸€ç›´åœ¨ç­‰å¾…</div></pre></td></tr></table></figure>
<blockquote>
<p>åŸå› ï¼šå½“å¯¹è±¡çš„å‰¯æœ¬æ•°å°äºè®¾å®šçš„æœ€å°æ•°ï¼ˆmin_sizeï¼‰æ—¶ï¼Œcephä¸å“åº”å¯¹åº”objectçš„IOè¯·æ±‚</p>
</blockquote>
<p><strong>5ã€å¯åŠ¨ osd.1</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># systemctl start ceph-osd@1</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œä¼šå‘ç°ï¼Œä¸Šé¢å¡ç€çš„é‚£ä¸ªå‘½ä»¤è¿”å›äº†ï¼Œå¹¶ä¸”å¾—åˆ°çš„å†…å®¹æ­£ç¡®ã€‚</p>
<p>æŸ¥çœ‹å½“å‰pgåˆ†å¸ƒ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph osd map rbd xfy</div><div class="line">osdmap e76 pool &apos;rbd&apos; (0) object &apos;xfy&apos; -&gt; pg 0.c76c82f (0.2f) -&gt; up ([1,4], p1) acting ([1,4], p1)</div></pre></td></tr></table></figure>
<p>pgçŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># ceph pg dump_stuck |egrep ^0.2f</div><div class="line">ok</div><div class="line">0.2f    active+undersized+degraded [1,4]          1   [1,4]              1</div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œè¿™é‡Œä¸€ä¸ªæœ‰æ„æ€çš„äº‹æƒ…æ˜¯ï¼Œåœ¨ç¬¬ä¸‰æ­¥çš„æ—¶å€™åªæœ‰ä¸€ä¸ªå‰¯æœ¬åœ¨ osd.0 ä¸Šï¼Œå› ä¸º osd.1 æ˜¯ä¸»å‰¯æœ¬</p>
<p>å¯åŠ¨çš„æ—¶å€™ï¼Œ4 ä½œä¸ºä¸´æ—¶pgåŠ å…¥ï¼Œç„¶åç­‰ 1 æ¢å¤å®Œä»¥å</p>
<p><strong>6ã€å¯åŠ¨ osd.2</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># systemctl start ceph-osd@2</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œpg æ˜ å°„æ¢å¤æ­£å¸¸</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph osd map rbd xfy</div><div class="line">osdmap e83 pool &apos;rbd&apos; (0) object &apos;xfy&apos; -&gt; pg 0.c76c82f (0.2f) -&gt; up ([1,2,0], p1) acting ([1,2,0], p1)</div></pre></td></tr></table></figure>
<p>pgçš„çŠ¶æ€å¼€å§‹å˜åŒ–</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># ceph pg dump_stuck |egrep ^0.2f</div><div class="line">ok</div><div class="line">0.2f               active+remapped [1,2]          1 [1,2,4]              1</div></pre></td></tr></table></figure>
<p>ç›´è‡³OK</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph pg dump_stuck |egrep ^0.2f</div><div class="line">ok</div></pre></td></tr></table></figure>
<h2 id="PGä¿®å¤"><a href="#PGä¿®å¤" class="headerlink" title="PGä¿®å¤"></a>PGä¿®å¤</h2><p><strong>1ã€æˆ‘ä¿®æ”¹ä¸€ä¸‹ osd.1 ä¸­å¯¹è±¡ xfy ä¸»å‰¯æœ¬çš„å†…å®¹</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># cat /var/lib/ceph/osd/ceph-2/current/0.2f_head/xfy__head_0C76C82F__0</div><div class="line">xin fan yang have delicious food</div><div class="line">// æ”¹ä¸º</div><div class="line"># cat /var/lib/ceph/osd/ceph-2/current/0.2f_head/xfy__head_0C76C82F__0</div><div class="line">xin fan yang have food</div></pre></td></tr></table></figure>
<p>2ã€æ‰«æè¿™ä¸ªPG</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph pg scrub 0.2f</div><div class="line">instructing pg 0.2f on osd.1 to scrub</div></pre></td></tr></table></figure>
<p><strong>3ã€è¯»è¿™ä¸ªå¯¹è±¡</strong></p>
<p>è¿™æ—¶å€™ä¼šä¸ä¼šå‘ç”Ÿè¯»åˆ°æ”¹è¿‡çš„é”™è¯¯å†…å®¹å‘¢ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># rados -p rbd get xfy 333</div><div class="line"># cat 333</div><div class="line">xin fan yang have delicious food</div></pre></td></tr></table></figure>
<p>å¹¶æ²¡æœ‰ï¼Œè¯»åˆ°çš„ä»ç„¶æ˜¯æ­£ç¡®çš„å†…å®¹</p>
<p><strong>4ã€æŸ¥çœ‹cephçŠ¶æ€</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># ceph -s</div><div class="line">    cluster 4c7ec5af-cbd3-40fd-8c96-0615c77660d4</div><div class="line">     health HEALTH_ERR</div><div class="line">            1 pgs inconsistent</div><div class="line">            1 scrub errors</div><div class="line">  ...</div></pre></td></tr></table></figure>
<p>æŠ¥çš„é”™è¯¯æ˜¯ï¼šæœ‰ä¸€ä¸ªpg inconsistentï¼Œå°±æ˜¯å†…å®¹ä¸ä¸€è‡´ã€‚é‚£ä¹ˆå…·ä½“æ˜¯å“ªä¸ªpg scurb errorsäº†å‘¢ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># ceph health detail</div><div class="line">HEALTH_ERR 1 pgs inconsistent; 1 scrub errors</div><div class="line">pg 0.2f is active+clean+inconsistent, acting [1,2,0]</div><div class="line">1 scrub errors</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ­£æ˜¯æˆ‘ä»¬ä¿®æ”¹çš„é‚£ä¸ªpg</p>
<p><strong>5ã€ä¿®å¤PG</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph pg repair 0.2f</div><div class="line">instructing pg 0.2f on osd.1 to repair</div></pre></td></tr></table></figure>
<p><strong>6ã€æ­¤æ—¶å†…å®¹å·²è¢«çº æ­£è¿‡æ¥</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># cat  /var/lib/ceph/osd/ceph-1/current/0.2f_head/xfy__head_0C76C82F__0</div><div class="line">xin fan yang have delicious food</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œé›†ç¾¤çŠ¶æ€OK</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ceph health detail</div><div class="line">HEALTH_OK</div></pre></td></tr></table></figure>
<h2 id="PGçŠ¶æ€åˆ—è¡¨"><a href="#PGçŠ¶æ€åˆ—è¡¨" class="headerlink" title="PGçŠ¶æ€åˆ—è¡¨"></a>PGçŠ¶æ€åˆ—è¡¨</h2><p><strong>1ã€peering</strong></p>
<p>Ceph ä¸ºå½’ç½®ç»„å»ºç«‹äº’è”æ—¶ï¼Œä¼šè®©å­˜å‚¨å½’ç½®ç»„å‰¯æœ¬çš„ OSD ä¹‹é—´å°±å…¶ä¸­çš„å¯¹è±¡å’Œå…ƒæ•°æ®çŠ¶æ€è¾¾æˆä¸€è‡´ã€‚ Ceph å®Œæˆäº†äº’è”ï¼Œä¹Ÿå°±æ„å‘³ç€å­˜å‚¨ç€å½’ç½®ç»„çš„ OSD å°±å…¶å½“å‰çŠ¶æ€è¾¾æˆäº†ä¸€è‡´ã€‚ç„¶è€Œï¼Œäº’è”è¿‡ç¨‹çš„å®Œæˆå¹¶ä¸èƒ½è¡¨æ˜å„å‰¯æœ¬éƒ½æœ‰äº†æ•°æ®çš„æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<p><strong>2ã€active</strong></p>
<p>peeringå®Œæˆåï¼Œä¸€å½’ç½®ç»„çŠ¶æ€ä¼šå˜ä¸º active ã€‚ active çŠ¶æ€æ„å‘³ç€æ•°æ®å·²å®Œå¥½åœ°ä¿å­˜åˆ°äº†ä¸»å½’ç½®ç»„å’Œå‰¯æœ¬å½’ç½®ç»„ã€‚</p>
<p><strong>3ã€clean</strong></p>
<p>æŸä¸€å½’ç½®ç»„å¤„äº clean çŠ¶æ€æ—¶ï¼Œä¸» OSD å’Œå‰¯æœ¬ OSD å·²æˆåŠŸäº’è”ï¼Œå¹¶ä¸”æ²¡æœ‰åç¦»çš„å½’ç½®ç»„ã€‚ Ceph å·²æŠŠå½’ç½®ç»„ä¸­çš„å¯¹è±¡å¤åˆ¶äº†è§„å®šæ¬¡æ•°ã€‚</p>
<p><strong>4ã€degraded</strong></p>
<p>å½“å®¢æˆ·ç«¯å‘ä¸» OSD å†™å…¥æ•°æ®æ—¶ï¼Œç”±ä¸» OSD è´Ÿè´£æŠŠæ•°æ®å‰¯æœ¬å†™å…¥å…¶ä½™å‰¯æœ¬ OSD ã€‚ä¸» OSD æŠŠå¯¹è±¡å†™å…¥å­˜å‚¨å™¨åï¼Œåœ¨å‰¯æœ¬ OSD åˆ›å»ºå®Œå¯¹è±¡å‰¯æœ¬å¹¶æŠ¥å‘Šç»™ä¸» OSD ä¹‹å‰ï¼Œä¸» OSD ä¼šä¸€ç›´åœç•™åœ¨ degraded çŠ¶æ€ã€‚</p>
<ul>
<li>å½’ç½®ç»„çŠ¶æ€å¯ä»¥å¤„äº active+degraded çŠ¶æ€ï¼ŒåŸå› åœ¨äºä¸€ OSD å³ä½¿å°šæœªæŒæœ‰æ‰€æœ‰å¯¹è±¡ä¹Ÿå¯ä»¥å¤„äº active çŠ¶æ€ã€‚å¦‚æœä¸€ OSD æŒ‚äº†ï¼Œ Ceph ä¼šæŠŠåˆ†é…åˆ°æ­¤ OSD çš„å½’ç½®ç»„éƒ½æ ‡è®°ä¸º degraded ï¼›é‚£ä¸ª OSD é‡ç”Ÿåï¼Œå®ƒä»¬å¿…é¡»é‡æ–°äº’è”ã€‚ç„¶è€Œï¼Œå®¢æˆ·ç«¯ä»å¯ä»¥å‘å¤„äº degraded çŠ¶æ€çš„å½’ç½®ç»„å†™å…¥æ–°å¯¹è±¡ï¼Œåªè¦å®ƒè¿˜åœ¨ active çŠ¶æ€ã€‚</li>
<li>å¦‚æœä¸€ OSD æŒ‚äº†ï¼Œä¸”è€æ˜¯å¤„äº degraded çŠ¶æ€ï¼Œ Ceph ä¼šæŠŠ down çš„ OSD æ ‡è®°ä¸ºåœ¨é›†ç¾¤å¤–ï¼ˆ out ï¼‰ã€å¹¶æŠŠé‚£ä¸ª down æ‰çš„ OSD ä¸Šçš„æ•°æ®é‡æ˜ å°„åˆ°å…¶å®ƒ OSD ã€‚ä»æ ‡è®°ä¸º down åˆ° out çš„æ—¶é—´é—´éš”ç”± mon osd down out interval æ§åˆ¶ï¼Œé»˜è®¤æ˜¯ 300 ç§’ã€‚</li>
<li>å½’ç½®ç»„ä¹Ÿä¼šè¢«é™çº§ï¼ˆ degraded ï¼‰ï¼Œå› ä¸º Ceph æ‰¾ä¸åˆ°æœ¬åº”å­˜åœ¨äºæ­¤å½’ç½®ç»„ä¸­çš„ä¸€æˆ–å¤šä¸ªå¯¹è±¡ï¼Œè¿™æ—¶ï¼Œä½ ä¸èƒ½è¯»å†™æ‰¾ä¸åˆ°çš„å¯¹è±¡ï¼Œä½†ä»èƒ½è®¿é—®ä½äºé™çº§å½’ç½®ç»„ä¸­çš„å…¶å®ƒå¯¹è±¡ã€‚</li>
</ul>
<p><strong>5ã€recovering</strong></p>
<p>Ceph è¢«è®¾è®¡ä¸ºå¯å®¹é”™ï¼Œå¯æŠµå¾¡ä¸€å®šè§„æ¨¡çš„è½¯ã€ç¡¬ä»¶é—®é¢˜ã€‚å½“æŸ OSD æŒ‚äº†ï¼ˆ down ï¼‰æ—¶ï¼Œå…¶å†…çš„å½’ç½®ç»„ä¼šè½åäºåˆ«çš„å½’ç½®ç»„å‰¯æœ¬ï¼›æ­¤ OSD é‡ç”Ÿï¼ˆ up ï¼‰æ—¶ï¼Œå½’ç½®ç»„å†…å®¹å¿…é¡»æ›´æ–°åˆ°å½“å‰çŠ¶æ€ï¼›åœ¨æ­¤æœŸé—´ï¼Œ OSD å¤„äº recovering çŠ¶æ€ã€‚</p>
<blockquote>
<p>æ¢å¤å¹¶éæ€»æ˜¯è¿™äº›å°äº‹ï¼Œå› ä¸ºä¸€æ¬¡ç¡¬ä»¶å¤±è´¥å¯èƒ½ç‰µè¿å¤šä¸ª OSD ã€‚æ¯”å¦‚ä¸€ä¸ªæœºæŸœæˆ–æˆ¿é—´çš„ç½‘ç»œäº¤æ¢æœºå¤±è´¥äº†ï¼Œè¿™ä¼šå¯¼è‡´å¤šä¸ªä¸»æœºä¸Šçš„ OSD è½åäºé›†ç¾¤çš„å½“å‰çŠ¶æ€ï¼Œæ•…éšœæ¢å¤åæ¯ä¸€ä¸ª OSD éƒ½å¿…é¡»æ¢å¤ã€‚</p>
</blockquote>
<p>Ceph æä¾›äº†å‡ ä¸ªé€‰é¡¹æ¥å‡è¡¡èµ„æºç«äº‰ï¼Œå¦‚æ–°æœåŠ¡è¯·æ±‚ã€æ¢å¤æ•°æ®å¯¹è±¡å’Œæ¢å¤å½’ç½®ç»„åˆ°å½“å‰çŠ¶æ€ã€‚</p>
<ul>
<li><code>osd recovery delay start</code> é€‰é¡¹å…è®¸ä¸€ OSD åœ¨å¼€å§‹æ¢å¤è¿›ç¨‹å‰ï¼Œå…ˆé‡å¯ã€é‡å»ºäº’è”ã€ç”šè‡³å¤„ç†ä¸€äº›é‡æ”¾è¯·æ±‚ï¼›</li>
<li><code>osd recovery threads</code> é€‰é¡¹é™åˆ¶æ¢å¤è¿›ç¨‹çš„çº¿ç¨‹æ•°ï¼Œé»˜è®¤ä¸º 1 çº¿ç¨‹ï¼› </li>
<li><code>osd recovery thread timeout</code> è®¾ç½®çº¿ç¨‹è¶…æ—¶ï¼Œå› ä¸ºå¤šä¸ª OSD å¯èƒ½äº¤æ›¿å¤±è´¥ã€é‡å¯å’Œé‡å»ºäº’è”ï¼› </li>
<li><code>osd recovery max active</code> é€‰é¡¹é™åˆ¶ä¸€ OSD æœ€å¤šåŒæ—¶æ¥å—å¤šå°‘è¯·æ±‚ï¼Œä»¥é˜²å®ƒå‹åŠ›è¿‡å¤§è€Œä¸èƒ½æ­£å¸¸æœåŠ¡ï¼› </li>
<li><code>osd recovery max chunk</code> é€‰é¡¹é™åˆ¶æ¢å¤æ•°æ®å—å°ºå¯¸ï¼Œä»¥é˜²ç½‘ç»œæ‹¥å¡ã€‚</li>
</ul>
<p><strong>6ã€backfilling</strong></p>
<p>æœ‰æ–° OSD åŠ å…¥é›†ç¾¤æ—¶ï¼Œ CRUSH ä¼šæŠŠç°æœ‰é›†ç¾¤å†…çš„éƒ¨åˆ†å½’ç½®ç»„é‡åˆ†é…ç»™å®ƒã€‚å¼ºåˆ¶æ–° OSD ç«‹å³æ¥å—é‡åˆ†é…çš„å½’ç½®ç»„ä¼šä½¿ä¹‹è¿‡è½½ï¼Œç”¨å½’ç½®ç»„å›å¡«å¯ä½¿è¿™ä¸ªè¿‡ç¨‹åœ¨åå°å¼€å§‹ã€‚åªè¦å›å¡«é¡ºåˆ©å®Œæˆï¼Œæ–° OSD å°±å¯ä»¥å¯¹å¤–æœåŠ¡äº†ã€‚</p>
<p>åœ¨å›å¡«è¿è½¬æœŸé—´ï¼Œä½ å¯èƒ½è§åˆ°ä»¥ä¸‹å‡ ç§çŠ¶æ€ä¹‹ä¸€ï¼š </p>
<ul>
<li>backfill_wait è¡¨æ˜ä¸€å›å¡«æ“ä½œåœ¨ç­‰å¾…æ—¶æœºï¼Œå°šæœªå¼€å§‹ï¼› </li>
<li>backfill è¡¨æ˜ä¸€å›å¡«æ“ä½œæ­£åœ¨è¿›è¡Œï¼› </li>
<li>backfill_too_full è¡¨æ˜éœ€è¦è¿›è¡Œå›å¡«ï¼Œä½†æ˜¯å› å­˜å‚¨ç©ºé—´ä¸è¶³è€Œä¸èƒ½å®Œæˆã€‚</li>
<li>incomplete çŠ¶æ€è¡¨æ˜æŸå½’ç½®ç»„ä¸èƒ½å›å¡«</li>
</ul>
<p>Ceph æä¾›äº†å¤šä¸ªé€‰é¡¹æ¥è§£å†³é‡åˆ†é…å½’ç½®ç»„ç»™ä¸€ OSD ï¼ˆç‰¹åˆ«æ˜¯æ–° OSD ï¼‰æ—¶ç›¸å…³çš„è´Ÿè½½é—®é¢˜ã€‚</p>
<ul>
<li>é»˜è®¤ï¼Œ<code>osd_max_backfills</code> æŠŠåŒå‘çš„å›å¡«å¹¶å‘é‡éƒ½è®¾ç½®ä¸º 10 ï¼› </li>
<li><code>osd backfill full \ ratio</code> å¯è®©ä¸€ OSD åœ¨æ¥è¿‘å æ»¡ç‡ï¼ˆé»˜è®¤ 85% ï¼‰æ—¶æ‹’ç»å›å¡«è¯·æ±‚ï¼Œå¦‚æœä¸€ OSD æ‹’ç»äº†å›å¡«è¯·æ±‚ï¼Œåœ¨ <code>osd backfill retry interval</code> é—´éš”ä¹‹åå°†é‡è¯•ï¼ˆé»˜è®¤ 10 ç§’ï¼‰ï¼› </li>
<li>OSD ä¹Ÿèƒ½ç”¨ <code>osd backfill scan min</code> å’Œ <code>osd backfill scan max</code> æ¥ç®¡ç†æ‰«æé—´éš”ï¼ˆé»˜è®¤ 64 å’Œ 512 ï¼‰ã€‚</li>
</ul>
<p><strong>7ã€remapped</strong></p>
<p>è´Ÿè´£ç»´æŠ¤æŸä¸€å½’ç½®ç»„çš„ Acting Set å˜æ›´æ—¶ï¼Œæ•°æ®è¦ä»æ—§é›†åˆè¿ç§»åˆ°æ–°çš„ã€‚æ–°çš„ä¸» OSD è¦èŠ±è´¹ä¸€äº›æ—¶é—´æ‰èƒ½æä¾›æœåŠ¡ï¼Œæ‰€ä»¥è€çš„ä¸» OSD è¿˜è¦æŒç»­æä¾›æœåŠ¡ã€ç›´åˆ°å½’ç½®ç»„è¿ç§»å®Œã€‚æ•°æ®è¿ç§»å®Œåï¼Œè¿è¡Œå›¾ä¼šåŒ…å«æ–° acting set é‡Œçš„ä¸» OSD ã€‚</p>
<p><strong>8ã€stale</strong></p>
<p>è™½ç„¶ Ceph ç”¨å¿ƒè·³æ¥ä¿è¯ä¸»æœºå’Œå®ˆæŠ¤è¿›ç¨‹åœ¨è¿è¡Œï¼Œä½†æ˜¯ ceph-osd ä»æœ‰å¯èƒ½è¿›å…¥ stuck çŠ¶æ€ï¼Œå®ƒä»¬æ²¡æœ‰æŒ‰æ—¶æŠ¥å‘Šå…¶çŠ¶æ€ï¼ˆå¦‚ç½‘ç»œç¬æ–­ï¼‰ã€‚é»˜è®¤ï¼Œ OSD å®ˆæŠ¤è¿›ç¨‹æ¯åŠç§’ï¼ˆ 0.5 ï¼‰ä¼šä¸€æ¬¡æŠ¥å‘Šå…¶å½’ç½®ç»„ã€å‡ºæµé‡ã€å¼•å¯¼å’Œå¤±è´¥ç»Ÿè®¡çŠ¶æ€ï¼Œæ­¤é¢‘ç‡é«˜äºå¿ƒè·³é˜€å€¼ã€‚å¦‚æœä¸€å½’ç½®ç»„çš„ä¸» OSD æ‰€åœ¨çš„ acting set æ²¡èƒ½å‘ç›‘è§†å™¨æŠ¥å‘Šã€æˆ–è€…å…¶å®ƒç›‘è§†å™¨å·²ç»æŠ¥å‘Šäº†é‚£ä¸ªä¸» OSD å·² down ï¼Œç›‘è§†å™¨ä»¬å°±ä¼šæŠŠæ­¤å½’ç½®ç»„æ ‡è®°ä¸º stale ã€‚</p>
<blockquote>
<p>å¯åŠ¨é›†ç¾¤æ—¶ï¼Œä¼šç»å¸¸çœ‹åˆ° stale çŠ¶æ€ï¼Œç›´åˆ°äº’è”å®Œæˆã€‚é›†ç¾¤è¿è¡Œä¸€é˜µåï¼Œå¦‚æœè¿˜èƒ½çœ‹åˆ°æœ‰å½’ç½®ç»„ä½äº stale çŠ¶æ€ï¼Œå°±è¯´æ˜é‚£äº›å½’ç½®ç»„çš„ä¸» OSD æŒ‚äº†ï¼ˆ down ï¼‰ã€æˆ–æ²¡åœ¨å‘ç›‘è§†å™¨æŠ¥å‘Šç»Ÿè®¡ä¿¡æ¯ã€‚</p>
</blockquote>
<p><strong>9ã€undersized</strong></p>
<p>PGçš„å‰¯æœ¬æ•°æ¯”poolçš„é…ç½®ä¸­å‰¯æœ¬æ•°å°‘ã€‚</p>
<p>å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æŒ‡å®špoolçš„å‰¯æœ¬æ•°ï¼Œé»˜è®¤æ˜¯3ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># ceph osd pool get &#123;poolname&#125; size</div></pre></td></tr></table></figure>
<p><strong>10ã€peered</strong></p>
<p>PGå·²ç»peeredï¼Œä½†æ˜¯å‰¯æœ¬æ•°å°‘äºpoolé…ç½®ä¸­æŒ‡å®šçš„æœ€å°å‰¯æœ¬æ•°ï¼Œä¸èƒ½å‘clientæä¾›IOæ“ä½œã€‚åœ¨è¿™ç§çŠ¶æ€ä¸‹ä¼šå‡ºå‘ recovery æ“ä½œï¼Œæ‰€ä»¥ pg æœ€ç»ˆä¼šæ„ˆåˆåˆ°æœ€å°å‰¯æœ¬æ•°ã€‚</p>
<p>å¯é€šè¿‡å¦‚ä¸‹å‘½ä»¤å¾—åˆ°æŒ‡å®špoolçš„æœ€å°å‰¯æœ¬æ•°ï¼Œé»˜è®¤æ˜¯2ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># ceph osd pool get &#123;poolname&#125; min_size</div></pre></td></tr></table></figure>
<p><strong>11ã€incomplete</strong></p>
<p>cephæ£€æµ‹åˆ°ä¸€ä¸ªPGç¼ºå°‘å¯èƒ½å·²ç»å‘ç”Ÿçš„å†™å…¥ä¿¡æ¯ï¼Œæˆ–æ²¡æœ‰ä»»ä½•å¥åº·çš„å‰¯æœ¬ã€‚å¦‚æœçœ‹åˆ°æ­¤çŠ¶æ€ï¼Œè¯·å°è¯•å¯åŠ¨ä»»ä½•å¯èƒ½åŒ…å«æ‰€éœ€ä¿¡æ¯çš„å¤±è´¥çš„OSDï¼Œæˆ–æš‚æ—¶è°ƒæ•´min_sizeä»¥å…è®¸æ¢å¤ã€‚</p>
<p><strong>å…¶ä»–ï¼š</strong></p>
<p>ä¸€ä¸ªå½’ç½®ç»„çŠ¶æ€ä¸æ˜¯ active+clean æ—¶æœªå¿…æœ‰é—®é¢˜ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå½’ç½®ç»„å¡ä½æ—¶ Ceph çš„è‡ªä¿®å¤åŠŸèƒ½å¾€å¾€æ— èƒ½ä¸ºåŠ›ï¼Œå¡ä½çš„çŠ¶æ€ç»†åˆ†ä¸ºï¼š</p>
<ul>
<li>Unclean: å½’ç½®ç»„é‡Œæœ‰äº›å¯¹è±¡çš„å‰¯æœ¬æ•°æœªè¾¾åˆ°æœŸæœ›æ¬¡æ•°ï¼Œå®ƒä»¬åº”è¯¥åœ¨æ¢å¤ä¸­ï¼›</li>
<li>Inactive: å½’ç½®ç»„ä¸èƒ½å¤„ç†è¯»å†™è¯·æ±‚ï¼Œå› ä¸ºå®ƒä»¬åœ¨ç­‰ç€ä¸€ä¸ªæŒæœ‰æœ€æ–°æ•°æ®çš„ OSD å›åˆ° up çŠ¶æ€ï¼›</li>
<li>Stale: å½’ç½®ç»„ä»¬å¤„äºä¸€ç§æœªçŸ¥çŠ¶æ€ï¼Œå› ä¸ºå­˜å‚¨å®ƒä»¬çš„ OSD æœ‰ä¸€é˜µå­æ²¡å‘ç›‘è§†å™¨æŠ¥å‘Šäº†ï¼ˆç”± mon osd report timeout é…ç½®ï¼‰ã€‚</li>
</ul>
<p>æ‰¾å‡ºå¡ä½çš„å½’ç½®ç»„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ceph pg dump_stuck [unclean|inactive|stale|undersized|degraded]</div></pre></td></tr></table></figure>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>æœ¬æ–‡æ ‡é¢˜:</span><a href="/2017/07/28/ceph-placement-group/">ceph placement group</a></p>
        <p><span>æ–‡ç« ä½œè€…:</span><a href="/" title="å›åˆ°ä¸»é¡µ">å¤å¤©çš„é£</a></p>
        <p><span>å‘å¸ƒæ—¶é—´:</span>2017-07-28, 15:20:25</p>
        <p><span>æœ€åæ›´æ–°:</span>2017-07-28, 15:47:52</p>
        <p>
            <span>åŸå§‹é“¾æ¥:</span><a class="post-url" href="/2017/07/28/ceph-placement-group/" title="ceph placement group">http://xiaqunfeng.cc/2017/07/28/ceph-placement-group/</a>
            <span class="copy-path" data-clipboard-text="åŸæ–‡: http://xiaqunfeng.cc/2017/07/28/ceph-placement-group/ã€€ã€€ä½œè€…: å¤å¤©çš„é£" title="ç‚¹å‡»å¤åˆ¶æ–‡ç« é“¾æ¥"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>è®¸å¯åè®®:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"ç½²å-éå•†ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0"</a> è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ã€‚
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2017/08/01/ceph-peeringè¿‡ç¨‹åˆ†æ/">
                    ceph peeringè¿‡ç¨‹åˆ†æ
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2017/07/28/Remove-Big-RBD-Image/">
                    Remove Big RBD Image
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#PGå‘½å"><span class="toc-number">1.</span> <span class="toc-text">PGå‘½å</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PGå”¯ä¸€æ ‡è¯†ç¬¦"><span class="toc-number">1.1.</span> <span class="toc-text">PGå”¯ä¸€æ ‡è¯†ç¬¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æŸ¥çœ‹osdç›®å½•é‡Œpg"><span class="toc-number">1.2.</span> <span class="toc-text">æŸ¥çœ‹osdç›®å½•é‡Œpg</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PGçŠ¶æ€"><span class="toc-number">2.</span> <span class="toc-text">PGçŠ¶æ€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è·å–PGåˆ—è¡¨"><span class="toc-number">3.</span> <span class="toc-text">è·å–PGåˆ—è¡¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å†™ä¸€ä¸ªobject"><span class="toc-number">4.</span> <span class="toc-text">å†™ä¸€ä¸ªobject</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PGçŠ¶æ€å˜åŒ–"><span class="toc-number">5.</span> <span class="toc-text">PGçŠ¶æ€å˜åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PGä¿®å¤"><span class="toc-number">6.</span> <span class="toc-text">PGä¿®å¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PGçŠ¶æ€åˆ—è¡¨"><span class="toc-number">7.</span> <span class="toc-text">PGçŠ¶æ€åˆ—è¡¨</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="éšè—ç›®å½•"  title="ç‚¹å‡»æŒ‰é’®éšè—æˆ–è€…æ˜¾ç¤ºæ–‡ç« ç›®å½•">

    <script>
        yiliaConfig.toc = ["éšè—ç›®å½•", "æ˜¾ç¤ºç›®å½•", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="åˆ†äº«åˆ°æ¨ç‰¹"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="åˆ†äº«ç»™ QQ å¥½å‹"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="å¤åˆ¶ç½‘å€"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="é€šè¿‡é‚®ä»¶åˆ†äº«"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="ç”Ÿæˆæ–‡ç« äºŒç»´ç "></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"ceph placement groupã€€| å¤å¤©çš„é£çš„åšå®¢ã€€","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    
        <section id="comments">
    <style> aside.comment-bar { margin: auto 30px; }</style>
    <div id="disqus_thread"></div>
    <script>
        var disqus_config = function(){
            this.page.url = 'http://xiaqunfeng.cc/2017/07/28/ceph-placement-group/';
            this.page.identifier = '2017/07/28/ceph-placement-group/';
        };
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = '//null.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        }
    </script>
    
    <script> loadComment(); </script>

</section>


    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2017/08/01/ceph-peeringè¿‡ç¨‹åˆ†æ/" title="ä¸Šä¸€ç¯‡: ceph peeringè¿‡ç¨‹åˆ†æ">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="æ–‡ç« åˆ—è¡¨"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2017/07/28/Remove-Big-RBD-Image/" title="ä¸‹ä¸€ç¯‡: Remove Big RBD Image">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/02/28/ceph-iscsiç½‘å…³/">ceph iscsiç½‘å…³</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/28/ceph-ansibleä½¿ç”¨æ‰‹å†Œ/">ceph ansibleä½¿ç”¨æ‰‹å†Œ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/14/Faster-R-CNN/">ã€è®ºæ–‡é˜…è¯»ã€‘Faster-R-CNN</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/05/faster-r-cnn-generate-anchors/">ã€ä»£ç é˜…è¯»ã€‘generate_anchors.py</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/25/Fast-R-CNN/">ã€è®ºæ–‡é˜…è¯»ã€‘Fast R-CNN</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/24/R-CNN/">ã€è®ºæ–‡é˜…è¯»ã€‘R-CNN</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/18/cephå†™æµç¨‹åˆ†æ/">cephå†™æµç¨‹åˆ†æ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/05/macä¸Šå®‰è£…caffeå¹¶è®­ç»ƒmnist/">macä¸Šå®‰è£…caffeå¹¶è®­ç»ƒmnist</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/27/cephæŒ‡å®šç‰ˆæœ¬å®‰è£…/">cephæŒ‡å®šç‰ˆæœ¬å®‰è£…</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/21/linux-command-day-day-up/">linux command day day up</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/19/awk-study-notes/">awk study notes</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/18/ceph-PGs-per-Pool-Calculator/">ceph PGs per Pool Calculator</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/15/too-many-PGs-per-OSD/">too many PGs per OSD</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/11/macä¸Šå®‰è£…python3/">macä¸Šå®‰è£…python3</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/30/lsblkå‘½ä»¤/">lsblkå‘½ä»¤</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/29/Syntax-error-unexpected/">Syntax error: '(' unexpected</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/17/ceph-osdç›¸å…³æ“ä½œ/">ceph osdç›¸å…³æ“ä½œ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/07/gitå¸¸ç”¨å‘½åæ€»ç»“/">gitå¸¸ç”¨å‘½åæ€»ç»“</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/05/python3-OS-module/">python3 OS module</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/03/ä¸ºä»€ä¹ˆå¯¹äºä¼ä¸šNASæ¥è¯´NFS-ganeshaæ˜¯ä¸€ä¸ªæ›´å¥½çš„NFS-server/">ä¸ºä»€ä¹ˆå¯¹äºä¼ä¸šNASæ¥è¯´NFS-ganeshaæ˜¯ä¸€ä¸ªæ›´å¥½çš„NFS server</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/01/ceph-peeringè¿‡ç¨‹åˆ†æ/">ceph peeringè¿‡ç¨‹åˆ†æ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/28/ceph-placement-group/">ceph placement group</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/28/Remove-Big-RBD-Image/">Remove Big RBD Image</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/centosä¸‹cephéƒ¨ç½²/">centosä¸‹cephéƒ¨ç½²</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/cephéƒ¨ç½²å®Œå…¨æ‰‹å†Œ/">cephéƒ¨ç½²å®Œå…¨æ‰‹å†Œ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/12/fioæµ‹è¯•ceph/">fioæµ‹è¯•ceph</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/07/centos7ä¸Šå®‰è£…python3/">centos7ä¸Šå®‰è£…python3</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/06/XFS-vs-EXT4/">XFS vs EXT4</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/06/ceph-luminousæ–°å‘½ä»¤æ¢ç´¢/">ceph luminousæ–°å‘½ä»¤æ¢ç´¢</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/04/ceph-Luminousæ–°åŠŸèƒ½ä¹‹crush-class/">ceph Luminousæ–°åŠŸèƒ½ä¹‹crush class</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/29/ceph-Luminousåˆæ¢/">ceph Luminous dashboardåˆæ¢</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/28/Ceph-v12-1-0-Luminous-RC-released/">Ceph v12.1.0 Luminous RC released</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/23/wgetæ‰¹é‡ä¸‹è½½httpç›®å½•åŠæ–‡ä»¶/">wgetæ‰¹é‡ä¸‹è½½httpç›®å½•åŠæ–‡ä»¶</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/16/å…¬æœ‰äº‘å’Œç§æœ‰äº‘çš„åŒºåˆ«/">å…¬æœ‰äº‘å’Œç§æœ‰äº‘çš„åŒºåˆ«</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/16/centos-7ä¸‹æ“çºµcephè¿›ç¨‹/">centos 7ä¸‹æ“çºµcephè¿›ç¨‹</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/15/vimç§»åŠ¨å…‰æ ‡/">vimç§»åŠ¨å…‰æ ‡</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/07/Map-RBD-Devices-on-NBD/">Map RBD Devices on NBD</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/06/ceph-rbd-map-failed/">ceph rbd map failed</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/26/ceph-monæ—¶é’Ÿåç§»é—®é¢˜/">ceph monæ—¶é’Ÿåç§»é—®é¢˜</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/26/GPG-key-retrieval-failure/">GPG key retrieval failure</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/25/macä¸Šå®ç°vimçš„markdowné¢„è§ˆ/">macä¸Šå®ç°vimçš„markdowné¢„è§ˆ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/23/cephæ—¥å¿—è¿ç§»/">cephæ—¥å¿—è¿ç§»</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/11/cpuæ‹“æ‰‘ç»“æ„/">cpuæ‹“æ‰‘åŠcephä½¿ç”¨æ—¶çš„ä¼˜åŒ–</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/07/firewalldå’Œiptables/">firewalldå’Œiptables</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/07/S-M-A-R-T-ç£ç›˜å¥åº·çŠ¶æ€ç›‘æµ‹å·¥å…·/">S.M.A.R.T--ç£ç›˜å¥åº·çŠ¶æ€ç›‘æµ‹å·¥å…·</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/04/iterm2é…è‰²/">iterm2é…è‰²--zsh & oh-my-zsh</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/03/nginxä½¿ç”¨å’Œé…ç½®/">nginxä½¿ç”¨å’Œé…ç½®</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/02/iterm2å¿«æ·é”®çš„ä½¿ç”¨/">iterm2å¿«æ·é”®çš„ä½¿ç”¨</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/02/VSMéƒ¨ç½²/">VSMéƒ¨ç½²</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/24/å¸¸ç”¨gitå‘½ä»¤æ¸…å•/">å¸¸ç”¨gitå‘½ä»¤æ¸…å•</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/24/ç†è§£socketç¼–ç¨‹/">ç†è§£socketç¼–ç¨‹</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/09/cowå’Œrowå¿«ç…§æœºåˆ¶çš„åŒºåˆ«/">cowå’Œrowå¿«ç…§æœºåˆ¶çš„åŒºåˆ«</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/09/Machine-Learning-Yearning-5ã€6/">Machine Learning Yearning(5ã€6ã€7)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/03/Machine-Learning-Yearning-3ã€4/">Machine Learning Yearning(3ã€4)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/02/Machine-Learning-Yearning-å¼€ç¯‡ã€1ã€2/">Machine Learning Yearning(å¼€ç¯‡ã€1ã€2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/01/å¼‚æ­¥IO/">å¼‚æ­¥IO</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/23/Bluestoreè°ƒç ”/">Bluestoreè°ƒç ”</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/23/RocksDBç›¸æ¯”LevelDBçš„æ–°ç‰¹æ€§/">RocksDBç›¸æ¯”LevelDBçš„æ–°ç‰¹æ€§</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/20/Kernel modules (ç®€ä½“ä¸­æ–‡)/">Kernel modules (ç®€ä½“ä¸­æ–‡)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/17/Linuxå‘½ä»¤â€”â€”pgrepå’Œpkill/">Linuxå‘½ä»¤â€”â€”pgrepå’Œpkill</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/16/Linuxå‘½ä»¤â€”â€”strace/">Linuxå‘½ä»¤â€”â€”strace</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/10/è·å–æ¯ä¸ªosdçš„PGæ•°/">è·å–æ¯ä¸ªosdçš„PGæ•°</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/10/RBD-ç›¸å…³æ“ä½œ/">RBD ç›¸å…³æ“ä½œ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/07/åœ¨Kraken-releaseç‰ˆæœ¬ä¸Šæµ‹è¯•Ceph-BlueStore/">åœ¨Kraken releaseç‰ˆæœ¬ä¸Šæµ‹è¯•Ceph BlueStore</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/04/ç”¨æˆ·æ€å’Œå†…æ ¸æ€/">ç”¨æˆ·æ€å’Œå†…æ ¸æ€</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/04/cephå‡çº§åˆ°krakenç‰ˆæœ¬/">cephå‡çº§åˆ°krakenç‰ˆæœ¬</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/03/Dm-cache-vs-Bcache/">Dm-cache vs Bcache</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/03/Flashcache-vs-Cache-tier/">Flashcache vs Cache tier</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/25/Linuxå‘½ä»¤â€”â€”parted/">Linuxå‘½ä»¤â€”â€”parted</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/25/è®¤è¯†SSD/">è®¤è¯†SSD</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/24/Ceph-KRAKEN(V11.2.0)/">Ceph â€” V11.2.0 KRAKEN(è¯‘)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/24/Crushmapå­¦ä¹ /">Crushmapå­¦ä¹ </a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/20/Cephä¸­ä¸¥é‡æ•°æ®ä¸ä¸€è‡´æ€§BUG/">Cephä¸­ä¸¥é‡æ•°æ®ä¸ä¸€è‡´æ€§BUG</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/20/å—å­˜å‚¨çš„ä¸–ç•Œ/">å—å­˜å‚¨çš„ä¸–ç•Œ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/17/Linuxå‘½ä»¤â€”â€”uptime/">Linuxå‘½ä»¤â€”â€”uptime</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/12/ddç£ç›˜å‘½ä»¤å°è®°/">ddç£ç›˜å‘½ä»¤å°è®°</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/12/è§£å†³calamariæ— æ³•è·å–é›†ç¾¤hostsä¿¡æ¯çš„BUG/">è§£å†³calamariæ— æ³•è·å–é›†ç¾¤hostsä¿¡æ¯çš„BUG</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/11/ubuntuä¸‹é…ç½®é‚®ä»¶å‘é€/">ubuntuä¸‹é…ç½®é‚®ä»¶å‘é€</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/11/ubuntuä¸‹ç³»ç»Ÿæ‰“åŒ…/">ubuntuä¸‹ç³»ç»Ÿæ‰“åŒ…</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/11/Linuxå‘½ä»¤â€”â€”historyåŠå…¶ä¼˜åŒ–/">Linuxå‘½ä»¤â€”â€”historyåŠå…¶ä¼˜åŒ–</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/11/Linuxä¸‹åˆ©ç”¨screenè¿›è¡Œå±å¹•åä½œ/">Linuxä¸‹åˆ©ç”¨screenè¿›è¡Œå±å¹•åä½œ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/11/Linuxå‘½ä»¤â€”â€”crontab/">Linuxå‘½ä»¤â€”â€”crontab</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/06/hexoçš„æ­å»º/">Macä¸Šhexoåšå®¢çš„æ­å»º</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2017-2018 å¤å¤©çš„é£
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="ç®€è€Œä¸å‡ Hexo åŒæ åšå®¢ä¸»é¢˜  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>





<div class="scroll" id="scroll">
    <a href="#" title="è¿”å›é¡¶éƒ¨"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="æŸ¥çœ‹è¯„è®º"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="è½¬åˆ°åº•éƒ¨"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>